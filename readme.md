# Cache System

——一个 C++缓存系统

实现了以下几种缓存淘汰策略

- LRU（Least Recently Used）
  - 基础 LRU
  - LRU-K：访问 K 次才进入缓存，避免热数据被大量新的冷数据淘汰
  - HashLRU：分片 LRU，提高并发性能
- LFU（Least Frequently Used）
  - 基础 LFU：加入最大平均频次，避免旧热点数据无法清除
  - HashLFU：分片 LFU，提高并发性能
- ARC（Adaptive Replacement Cache）
  - 基础 ARC：一种自适应缓存替换策略，结合 LRU 和 LFU 的优点，在不同情况下自动调整 LRU 和 LFU 的容量

测试结果如下：

```bash
🔧 缓存系统性能测试程序

🎯 本程序将对比以下6种缓存淘汰算法的性能表现:

📋 测试指标包括:
  • 命中率 (Hit Rate) - 缓存命中的百分比
  • 执行时间 (Execution Time) - 算法执行耗时
  • 吞吐量 (Throughput) - 每秒处理的操作数

🚀 开始缓存系统综合性能测试 🚀
本次测试将对比 LRU、LRU-K(k=2)、HashLRU、LFU、HashLFU、ARC 六种缓存淘汰策略
测试包含三个场景：热点数据访问、循环扫描、工作负载变化
========================================================================================================================

=== 测试场景1：热点数据访问测试 ===
正在测试 LRU 算法...
{Timer}[LRU 算法] took 285.48 ms
正在测试 LRU-K 算法...
{Timer}[LRU-K 算法] took 430.406 ms
正在测试 HashLRU 算法...
{Timer}[HashLRU 算法] took 311.743 ms
正在测试 LFU 算法...
{Timer}[LFU 算法] took 405.679 ms
正在测试 HashLFU 算法...
{Timer}[HashLFU 算法] took 434.933 ms
正在测试 ARC 算法...
{Timer}[ARC 算法] took 1213.31 ms

=== 热点数据访问测试 性能测试结果 ===
缓存容量: 20
----------------------------------------------------------------------------------------------------
        算法    命中率(%)       命中次数        总操作数        执行时间(ms)    吞吐量(ops/s)
----------------------------------------------------------------------------------------------------
        LRU     93.40           326489          349546          285             1226477
        LRU-K   93.38           327066          350234          430             814498
        HashLRU 93.40           326511          349578          311             1124045
        LFU     66.64           233075          349754          405             863590
        HashLFU 60.40           211153          349612          434             805558
        ARC     96.54           337632          349724          1213            288313
----------------------------------------------------------------------------------------------------

=== 热点数据访问测试 性能对比分析 ===
💡 最佳命中率: ARC (96.54%)
⚡ 最佳吞吐量: LRU (1226477 ops/s)


=== 测试场景2：循环扫描测试 ===
正在测试 LRU 算法...
{Timer}[LRU 算法] took 97 ms
正在测试 LRU-K 算法...
{Timer}[LRU-K 算法] took 136 ms
正在测试 HashLRU 算法...
{Timer}[HashLRU 算法] took 109 ms
正在测试 LFU 算法...
{Timer}[LFU 算法] took 94 ms
正在测试 HashLFU 算法...
{Timer}[HashLFU 算法] took 103 ms
正在测试 ARC 算法...
{Timer}[ARC 算法] took 185 ms

=== 循环扫描测试 性能测试结果 ===
缓存容量: 50
----------------------------------------------------------------------------------------------------
        算法    命中率(%)       命中次数        总操作数        执行时间(ms)    吞吐量(ops/s)
----------------------------------------------------------------------------------------------------
        LRU     95.45           152724          160008          97              1649567
        LRU-K   95.41           152786          160143          135             1186244
        HashLRU 95.57           153131          160231          108             1483620
        LFU     8.90            14230           159804          93              1718323
        HashLFU 9.01            14426           160114          102             1569745
        ARC     97.71           156242          159903          184             869038
----------------------------------------------------------------------------------------------------

=== 循环扫描测试 性能对比分析 ===
💡 最佳命中率: ARC (97.71%)
⚡ 最佳吞吐量: LFU (1718323 ops/s)


=== 测试场景3：工作负载剧烈变化测试 ===
正在测试 LRU 算法...
{Timer}[LRU 算法] took 4 ms
正在测试 LRU-K 算法...
{Timer}[LRU-K 算法] took 7 ms
正在测试 HashLRU 算法...
{Timer}[HashLRU 算法] took 4 ms
正在测试 LFU 算法...
{Timer}[LFU 算法] took 5 ms
正在测试 HashLFU 算法...
{Timer}[HashLFU 算法] took 6 ms
正在测试 ARC 算法...
{Timer}[ARC 算法] took 8 ms

=== 工作负载剧烈变化测试 性能测试结果 ===
缓存容量: 30
----------------------------------------------------------------------------------------------------
        算法    命中率(%)       命中次数        总操作数        执行时间(ms)    吞吐量(ops/s)
----------------------------------------------------------------------------------------------------
        LRU     78.64           5014            6376            3               2125333
        LRU-K   78.00           4973            6376            6               1062667
        HashLRU 78.15           4993            6389            3               2129667
        LFU     39.71           2529            6369            5               1273800
        HashLFU 47.14           3004            6373            6               1062167
        ARC     87.61           5613            6407            8               800875
----------------------------------------------------------------------------------------------------

=== 工作负载剧烈变化测试 性能对比分析 ===
💡 最佳命中率: ARC (87.61%)
⚡ 最佳吞吐量: HashLRU (2129667 ops/s)


====================================================================================================
🎉 缓存系统综合性能测试完成！
总耗时: 3860 毫秒
====================================================================================================

✅ 程序执行完成！
```
